type OrderItem {
  id: UUID!
  orderId: UUID!
  productVariant: ProductVariant!
  quantity: Int!
  priceAtOrderTime: Decimal!
}

type Order {
  id: UUID!
  customer: Customer!
  channel: Channel!
  shippingAddress: Address!
  billingAddress: Address!
  discount: Discount
  currencyCode: String!
  region: Region!
  items: [OrderItem!]!
  subtotalAmount: Decimal!
  taxAmount: Decimal!
  totalAmount: Decimal!
  status: OrderStatus!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type OrderConnection {
  edges: [OrderEdge!]!
  pageInfo: PageInfo!
}

type OrderEdge {
  cursor: String!
  node: Order!
}

type OrderItemConnection {
  edges: [OrderItemEdge!]!
  pageInfo: PageInfo!
}

type OrderItemEdge {
  cursor: String!
  node: OrderItem!
}

input OrderItemInput {
  productVariantId: UUID!
  quantity: Int!
  priceAtOrderTime: Decimal!
}

input CreateOrderInput {
  customerId: UUID!
  channelId: UUID!
  shippingAddressId: UUID!
  billingAddressId: UUID!
  discountId: UUID
  items: [OrderItemInput!]!
}

input UpdateOrderStatusInput {
  status: OrderStatus!
}

input OrderFilterInput {
  customerId: UUID
  channelId: UUID
  status: OrderStatus
  minAmount: Decimal
  maxAmount: Decimal
  startDate: DateTime
  endDate: DateTime
}

type OrderResponse {
  success: Boolean!
  data: Order
  error: ErrorResponse
}

extend type Query {
  order(id: UUID!): Order
  orders(
    first: Int
    after: String
    filter: OrderFilterInput
  ): OrderConnection!
}

extend type Mutation {
  createOrder(input: CreateOrderInput!): OrderResponse!
  updateOrderStatus(
    id: UUID!
    input: UpdateOrderStatusInput!
  ): OrderResponse!
  deleteOrder(id: UUID!): OrderResponse!
}
