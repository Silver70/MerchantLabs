type Discount {
  id: UUID!
  code: String
  type: DiscountType!
  value: Decimal!
  startDate: DateTime!
  endDate: DateTime!
  isActive: Boolean!
  appliesTo: DiscountAppliesToType!
  targetId: UUID
  minOrderAmount: Decimal
  maxDiscountAmount: Decimal
  createdAt: DateTime!
  updatedAt: DateTime!
}

type DiscountConnection {
  edges: [DiscountEdge!]!
  pageInfo: PageInfo!
}

type DiscountEdge {
  cursor: String!
  node: Discount!
}

input CreateDiscountInput {
  code: String
  type: DiscountType!
  value: Decimal!
  startDate: DateTime!
  endDate: DateTime!
  appliesTo: DiscountAppliesToType!
  targetId: UUID
  minOrderAmount: Decimal
  maxDiscountAmount: Decimal
}

input UpdateDiscountInput {
  code: String
  type: DiscountType
  value: Decimal
  startDate: DateTime
  endDate: DateTime
  isActive: Boolean
  appliesTo: DiscountAppliesToType
  targetId: UUID
  minOrderAmount: Decimal
  maxDiscountAmount: Decimal
}

type DiscountResponse {
  success: Boolean!
  data: Discount
  error: ErrorResponse
}

extend type Query {
  discount(id: UUID!): Discount
  discountByCode(code: String!): Discount
  discounts(first: Int, after: String, isActive: Boolean): DiscountConnection!
}

extend type Mutation {
  createDiscount(input: CreateDiscountInput!): DiscountResponse!
  updateDiscount(
    id: UUID!
    input: UpdateDiscountInput!
  ): DiscountResponse!
  deleteDiscount(id: UUID!): DiscountResponse!
}
