type Category {
  id: UUID!
  name: String!
  slug: String!
  parent: Category
  children: [Category!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Attribute {
  id: UUID!
  name: String!
  values: [AttributeValue!]!
}

type AttributeValue {
  id: UUID!
  attributeId: UUID!
  value: String!
}

type ProductVariant {
  id: UUID!
  productId: UUID!
  sku: String!
  quantityInStock: Int!
  attributes: [AttributeValue!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Product {
  id: UUID!
  name: String!
  slug: String!
  description: String
  category: Category!
  variants: [ProductVariant!]!
  isActive: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Collection {
  id: UUID!
  name: String!
  slug: String!
  description: String
  products: [Product!]!
  isActive: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type ProductConnection {
  edges: [ProductEdge!]!
  pageInfo: PageInfo!
}

type ProductEdge {
  cursor: String!
  node: Product!
}

type CategoryConnection {
  edges: [CategoryEdge!]!
  pageInfo: PageInfo!
}

type CategoryEdge {
  cursor: String!
  node: Category!
}

type CollectionConnection {
  edges: [CollectionEdge!]!
  pageInfo: PageInfo!
}

type CollectionEdge {
  cursor: String!
  node: Collection!
}

input ProductFilterInput {
  categoryId: UUID
  collectionId: UUID
  isActive: Boolean
  search: String
  minPrice: Decimal
  maxPrice: Decimal
}

input CreateCategoryInput {
  name: String!
  slug: String!
  parentId: UUID
}

input UpdateCategoryInput {
  name: String
  slug: String
  parentId: UUID
}

input CreateProductInput {
  name: String!
  slug: String!
  description: String
  categoryId: UUID!
}

input UpdateProductInput {
  name: String
  slug: String
  description: String
  categoryId: UUID
  isActive: Boolean
}

input CreateProductVariantInput {
  productId: UUID!
  sku: String!
  quantityInStock: Int
}

input UpdateProductVariantInput {
  sku: String
  quantityInStock: Int
}

input ProductVariantAttributeInput {
  attributeValueId: UUID!
}

input CreateCollectionInput {
  name: String!
  slug: String!
  description: String
}

input UpdateCollectionInput {
  name: String
  slug: String
  description: String
  isActive: Boolean
}

input CreateAttributeInput {
  name: String!
}

input CreateAttributeValueInput {
  attributeId: UUID!
  value: String!
}

type CategoryResponse {
  success: Boolean!
  data: Category
  error: ErrorResponse
}

type ProductResponse {
  success: Boolean!
  data: Product
  error: ErrorResponse
}

type ProductVariantResponse {
  success: Boolean!
  data: ProductVariant
  error: ErrorResponse
}

type CollectionResponse {
  success: Boolean!
  data: Collection
  error: ErrorResponse
}

type AttributeResponse {
  success: Boolean!
  data: Attribute
  error: ErrorResponse
}

extend type Query {
  category(id: UUID!): Category
  categories(first: Int, after: String): CategoryConnection!

  product(id: UUID!): Product
  products(first: Int, after: String, filter: ProductFilterInput): ProductConnection!
  productBySlug(slug: String!): Product

  collection(id: UUID!): Collection
  collections(first: Int, after: String): CollectionConnection!

  attribute(id: UUID!): Attribute
  attributes(first: Int, after: String): [Attribute!]!

  productVariant(id: UUID!): ProductVariant
}

extend type Mutation {
  createCategory(input: CreateCategoryInput!): CategoryResponse!
  updateCategory(id: UUID!, input: UpdateCategoryInput!): CategoryResponse!
  deleteCategory(id: UUID!): CategoryResponse!

  createProduct(input: CreateProductInput!): ProductResponse!
  updateProduct(id: UUID!, input: UpdateProductInput!): ProductResponse!
  deleteProduct(id: UUID!): ProductResponse!

  createProductVariant(input: CreateProductVariantInput!): ProductVariantResponse!
  updateProductVariant(
    id: UUID!
    input: UpdateProductVariantInput!
  ): ProductVariantResponse!
  deleteProductVariant(id: UUID!): ProductVariantResponse!
  addAttributeToVariant(
    variantId: UUID!
    attributeValueId: UUID!
  ): ProductVariantResponse!
  removeAttributeFromVariant(
    variantId: UUID!
    attributeValueId: UUID!
  ): ProductVariantResponse!

  createCollection(input: CreateCollectionInput!): CollectionResponse!
  updateCollection(
    id: UUID!
    input: UpdateCollectionInput!
  ): CollectionResponse!
  deleteCollection(id: UUID!): CollectionResponse!
  addProductToCollection(
    collectionId: UUID!
    productId: UUID!
  ): CollectionResponse!
  removeProductFromCollection(
    collectionId: UUID!
    productId: UUID!
  ): CollectionResponse!

  createAttribute(input: CreateAttributeInput!): AttributeResponse!
  deleteAttribute(id: UUID!): AttributeResponse!
  createAttributeValue(input: CreateAttributeValueInput!): AttributeResponse!
  deleteAttributeValue(id: UUID!): AttributeResponse!
}
