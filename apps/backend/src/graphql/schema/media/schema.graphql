type Media {
  id: UUID!
  url: String!
  type: MediaType!
  altText: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

type ProductMedia {
  productId: UUID!
  mediaId: UUID!
  media: Media!
  position: Int!
  isPrimary: Boolean!
}

type ProductVariantMedia {
  productVariantId: UUID!
  mediaId: UUID!
  media: Media!
  position: Int!
  isPrimary: Boolean!
}

type MediaConnection {
  edges: [MediaEdge!]!
  pageInfo: PageInfo!
}

type MediaEdge {
  cursor: String!
  node: Media!
}

input UploadMediaInput {
  url: String!
  type: MediaType!
  altText: String
}

input UpdateMediaInput {
  altText: String
}

input AddMediaToProductInput {
  mediaId: UUID!
  position: Int!
  isPrimary: Boolean
}

input AddMediaToProductVariantInput {
  mediaId: UUID!
  position: Int!
  isPrimary: Boolean
}

type MediaResponse {
  success: Boolean!
  data: Media
  error: ErrorResponse
}

type ProductMediaResponse {
  success: Boolean!
  data: ProductMedia
  error: ErrorResponse
}

type ProductVariantMediaResponse {
  success: Boolean!
  data: ProductVariantMedia
  error: ErrorResponse
}

extend type Query {
  media(id: UUID!): Media
  mediaList(first: Int, after: String, type: MediaType): MediaConnection!
}

extend type Mutation {
  uploadMedia(input: UploadMediaInput!): MediaResponse!
  updateMedia(id: UUID!, input: UpdateMediaInput!): MediaResponse!
  deleteMedia(id: UUID!): MediaResponse!

  addMediaToProduct(
    productId: UUID!
    input: AddMediaToProductInput!
  ): ProductMediaResponse!
  removeMediaFromProduct(
    productId: UUID!
    mediaId: UUID!
  ): ProductMediaResponse!

  addMediaToProductVariant(
    productVariantId: UUID!
    input: AddMediaToProductVariantInput!
  ): ProductVariantMediaResponse!
  removeMediaFromProductVariant(
    productVariantId: UUID!
    mediaId: UUID!
  ): ProductVariantMediaResponse!
}
